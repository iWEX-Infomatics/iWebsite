# Git Repository Configuration

## Repository Information

**Repository URL**: https://github.com/iWEX-Infomatics/iWebsite.git  
**Type**: Private Repository  
**Branch Strategy**: main (production), develop (development)

## Initial Setup

### 1. Initialize Git Repository

```bash
cd iwex_website
git init
git add .
git commit -m "Initial commit: iWEX Website custom Frappe app"
```

### 2. Add Remote Repository

```bash
git remote add origin https://github.com/iWEX-Infomatics/iWebsite.git
git branch -M main
git push -u origin main
```

### 3. Create Development Branch

```bash
git checkout -b develop
git push -u origin develop
```

## Branch Strategy

### Main Branch (main)
- Production-ready code only
- Protected branch (require pull requests)
- All changes must be reviewed
- Automatic deployment to production (optional)

### Development Branch (develop)
- Active development
- Feature integration
- Testing before merging to main

### Feature Branches
- Create from develop: `git checkout -b feature/feature-name develop`
- Merge back to develop via pull request
- Delete after merging

### Hotfix Branches
- Create from main: `git checkout -b hotfix/issue-name main`
- Merge to both main and develop
- Delete after merging

## Workflow

### For New Features

```bash
# 1. Create feature branch from develop
git checkout develop
git pull origin develop
git checkout -b feature/new-feature

# 2. Make changes and commit
git add .
git commit -m "feat: add new feature description"

# 3. Push to remote
git push -u origin feature/new-feature

# 4. Create Pull Request on GitHub
# 5. After review and approval, merge to develop
# 6. Delete feature branch
```

### For Bug Fixes

```bash
# 1. Create bugfix branch from develop
git checkout develop
git pull origin develop
git checkout -b bugfix/fix-description

# 2. Make changes and commit
git add .
git commit -m "fix: description of bug fix"

# 3. Push and create PR
git push -u origin bugfix/fix-description
```

### For Hotfixes (Production Issues)

```bash
# 1. Create hotfix branch from main
git checkout main
git pull origin main
git checkout -b hotfix/critical-issue

# 2. Make changes and commit
git add .
git commit -m "hotfix: description of critical fix"

# 3. Push and create PR to main
git push -u origin hotfix/critical-issue

# 4. After merging to main, also merge to develop
git checkout develop
git merge hotfix/critical-issue
git push origin develop
```

## Commit Message Convention

Follow Conventional Commits specification:

```
<type>(<scope>): <subject>

<body>

<footer>
```

### Types
- `feat`: New feature
- `fix`: Bug fix
- `docs`: Documentation changes
- `style`: Code style changes (formatting)
- `refactor`: Code refactoring
- `test`: Adding or updating tests
- `chore`: Maintenance tasks

### Examples

```bash
git commit -m "feat(services): add service filtering by category"
git commit -m "fix(contact-form): validate email format correctly"
git commit -m "docs(readme): update installation instructions"
git commit -m "style(css): improve responsive design for mobile"
git commit -m "refactor(api): optimize database queries"
```

## Installation from GitHub

### For Development

```bash
# Navigate to frappe-bench
cd /path/to/frappe-bench

# Get app from GitHub (requires authentication for private repo)
bench get-app https://github.com/iWEX-Infomatics/iWebsite.git --branch develop

# Install on site
bench --site [site-name] install-app iwex_website

# Build and restart
bench build --app iwex_website
bench restart
```

### For Production

```bash
# Get app from main branch
bench get-app https://github.com/iWEX-Infomatics/iWebsite.git --branch main

# Install on production site
bench --site production.site install-app iwex_website

# Migrate and build
bench --site production.site migrate
bench build --app iwex_website --production
bench restart
```

## GitHub Authentication

### Using Personal Access Token (PAT)

1. Generate PAT on GitHub:
   - Go to Settings > Developer settings > Personal access tokens
   - Generate new token with `repo` scope
   - Copy the token

2. Clone using token:
```bash
git clone https://YOUR_TOKEN@github.com/iWEX-Infomatics/iWebsite.git
```

3. Or configure credential helper:
```bash
git config --global credential.helper store
# Then enter token when prompted
```

### Using SSH Key

1. Generate SSH key:
```bash
ssh-keygen -t ed25519 -C "emails@iwex.in"
```

2. Add to GitHub:
   - Copy public key: `cat ~/.ssh/id_ed25519.pub`
   - Add to GitHub Settings > SSH and GPG keys

3. Clone using SSH:
```bash
git clone git@github.com:iWEX-Infomatics/iWebsite.git
```

## Updating the App

### Pull Latest Changes

```bash
cd apps/iwex_website
git pull origin main  # or develop

# Then update the site
cd ../..
bench --site [site-name] migrate
bench build --app iwex_website
bench restart
```

### Update Specific Version/Tag

```bash
cd apps/iwex_website
git fetch --all --tags
git checkout tags/v1.0.0  # or specific commit

cd ../..
bench --site [site-name] migrate
bench build --app iwex_website
bench restart
```

## Release Process

### Creating a Release

```bash
# 1. Ensure develop is up to date
git checkout develop
git pull origin develop

# 2. Create release branch
git checkout -b release/v1.0.0

# 3. Update version in __init__.py
# Edit: iwex_website/__init__.py
# Change: __version__ = '1.0.0'

# 4. Update CHANGELOG.md
# Add release notes

# 5. Commit changes
git add .
git commit -m "chore: prepare release v1.0.0"

# 6. Merge to main
git checkout main
git merge release/v1.0.0
git tag -a v1.0.0 -m "Release version 1.0.0"
git push origin main --tags

# 7. Merge back to develop
git checkout develop
git merge release/v1.0.0
git push origin develop

# 8. Delete release branch
git branch -d release/v1.0.0
```

## .gitignore Configuration

The repository already includes a `.gitignore` file with:
- Python cache files (*.pyc, __pycache__)
- Node modules
- Build artifacts
- IDE files (.vscode, .idea)
- Log files
- Environment files

## GitHub Repository Settings

### Recommended Settings

1. **Branch Protection Rules** (for main branch):
   - Require pull request reviews before merging
   - Require status checks to pass
   - Require branches to be up to date
   - Include administrators

2. **Collaborators**:
   - Add team members with appropriate permissions
   - Use teams for better organization

3. **GitHub Actions** (Optional):
   - CI/CD pipeline already configured in `.github/workflows/ci.yml`
   - Enable Actions in repository settings

4. **Security**:
   - Enable Dependabot alerts
   - Enable secret scanning
   - Review security advisories

## Troubleshooting

### Authentication Issues

```bash
# Clear cached credentials
git credential-cache exit

# Or remove stored credentials
git config --global --unset credential.helper
```

### Merge Conflicts

```bash
# Pull latest changes
git pull origin develop

# If conflicts occur, resolve them manually
# Then:
git add .
git commit -m "merge: resolve conflicts"
git push
```

### Undo Last Commit (Not Pushed)

```bash
git reset --soft HEAD~1  # Keep changes
# or
git reset --hard HEAD~1  # Discard changes
```

## Support

For repository access issues:
- Contact: emails@iwex.in
- GitHub Organization: iWEX-Infomatics

